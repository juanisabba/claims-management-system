<div>
  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-4">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div class="md:col-span-2">
        <label for="part" class="block text-sm font-medium text-gray-700">Description</label>
        <input
          id="part"
          type="text"
          formControlName="part"
          [attr.disabled]="isDisabled() ? true : null"
          class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm border p-2"
          placeholder="e.g. Front Bumper"
        />
        @if (form.get('part')?.touched && form.get('part')?.invalid) {
          <p class="mt-1 text-xs text-red-600">Description is required.</p>
        }
      </div>

      <div>
        <label for="severity" class="block text-sm font-medium text-gray-700">Severity</label>
        <select
          id="severity"
          formControlName="severity"
          [attr.disabled]="isDisabled() ? true : null"
          class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm border p-2"
        >
          @for (s of severities; track s) {
            <option [value]="s">{{ s | titlecase }}</option>
          }
        </select>
      </div>

      <div>
        <label for="price" class="block text-sm font-medium text-gray-700">Price (â‚¬)</label>
        <input
          id="price"
          type="number"
          formControlName="price"
          [attr.disabled]="isDisabled() ? true : null"
          class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm border p-2"
        />
        @if (form.get('price')?.touched && form.get('price')?.invalid) {
          <p class="mt-1 text-xs text-red-600">Price is required (min 0).</p>
        }
      </div>

      <div class="md:col-span-2">
        <label for="imageUrl" class="block text-sm font-medium text-gray-700">Image URL</label>
        <input
          id="imageUrl"
          type="url"
          formControlName="imageUrl"
          [attr.disabled]="isDisabled() ? true : null"
          class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm border p-2"
          placeholder="https://..."
        />
        @if (form.get('imageUrl')?.touched && form.get('imageUrl')?.invalid) {
          <p class="mt-1 text-xs text-red-600">A valid image URL is required.</p>
        }
      </div>
    </div>

    <div class="flex justify-end space-x-3 pt-4">
      <button
        type="button"
        (click)="cancel.emit()"
        class="bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
      >
        Cancel
      </button>
      <button
        type="submit"
        [disabled]="form.invalid || isDisabled()"
        class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
      >
        {{ initialData() ? 'Update' : 'Add' }} Damage
      </button>
    </div>
  </form>
</div>
